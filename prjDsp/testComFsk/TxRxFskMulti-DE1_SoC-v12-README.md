# TxRxFskMulti: 2-FSK sender and receiver with support for multiple frequencies

This is an implementation of the 2-FSK sender and receiver (modem) with support
for multiple channels.


## RELEASE

- Release version: 1.2
- Release year: 2017
- Target board: Altera DE1-SoC Rev. E/Rev. F


## PREREQUISITES

- A micro SD card must be inserted into the MICRO SD CARD slot (J11) during
  power on and/or system reset.
- The micro SD card must **NOT** contain a valid preloader image.


## USER INTERFACE

### Seven-segment display (HEX5-HEX0)

The seven-segment display shows the value "FX oY iZ", where

- "FX" identifies the release version (F2 = v1.2) of the modem,
- "oY" represents the index Y of the selected transmitter (TX) channel, and
- "iZ" represents the index Z of the selected receiver (RX) channel.

### HPS LEDs (LEDG7, green)

- USER LED (LEDG7) indicates if the HPS is properly configured. When properly
  configured, the LED flashes a pattern generated by combining a 1 Hz 50:50
  waveform and a 5/7 Hz 50:50 waveform using logical AND. Hence, the resulting
  pattern is
  
        OFF (700ms) - ON (300ms) - OFF (1500ms) - ON (300ms) - OFF (700ms) - ON (500ms) - OFF (900ms) - ON (100ms) - OFF (500ms) - ON (100ms) - OFF (900ms) - ON (500ms)
		
  Moreover, the LED turns on while pressing the HPS USER BUTTON (KEY8).
  
  *NOTE:* If the LED does not flash this pattern (or does not respond to the
  USER BUTTON), the HPS is not configured correctly (e.g. due to missing SD
  card or due to a valid (but non-matching) preloader image being present on
  the inserted card). **The modem will not work as expected in that case.**

### FPGA LEDs (LEDR9-LEDR0, red)

- LEDR0: PLL locked state (on = locked, off = not locked)
- LEDR1: Audio codec configuration in progress ("Start" signal)
- LEDR2: Audio codec configuration completed ("Configured" signal)

- LEDR3, LEDR4: Detected value of the receiver (on = '1', off = '0')
- LEDR5, LEDR6: Level of the RS-232 input for the transmitter (on = '1',
  off = '0' or transmitter override active)
- LEDR8: Transmitter override active (on = active, off = inactive)
- LEDR9: Level of the transmitter override (on = '1', off = '0')

### HPS push buttons (KEY5, KEY7, KEY8)

- HPS RESET (KEY5), WARM RESET (KEY7): Generate a reset signal
- USER BUTTON (KEY8): Turns on USER LED (LEDG7) while pressed

### FPGA switches (SW9-SW0)

- SW8: Activates the transmitter override. This allows the transmitter to
  continuously output the lower or the upper frequency of the selected TX
  channel.
- SW9: Sets the value of the transmitter override. If the transmitter override
  is active, this value determines which of the two frequencies of the selected
  TX channel is used.
- SW7..4: Select the TX channel. The switches represent a binary number, where
  SW7 is the MSb and SW4 is the LSb.
- SW3..0: Select the RX channel. The switches represent a binary number, where
  SW3 is the MSb and SW0 is the LSb.


## AUDIO INTERFACE

Audio output is available through LINE OUT (J3, green) and is suitable for
headphones. Audio input can be applied through MIC IN (J1, red) using a
suitable microphone. LINE IN (J2, blue) is **not** used.

*NOTE:* Connecting LINE OUT to MIC IN directly will overdrive the input and
leads to clipping of the signal. As a result, proper decoding of the signal
is not possible.


## SERIAL UART

The modem transceives data using the UART TO USB adapter (accessible through
mini USB connector J4).

*NOTE:* Transmission will not (properly) work if the HPS is not properly
configured (as indicated by HPS USER LED).


## CHANNELS

| 7-segment | SW7..4/SW3..0 | Channel | Frequency '0'    | Frequency '1'    |
|:---------:|:--------------|:--------|:-----------------|:-----------------|
| 0         | `0000`        | CH0     |  6376.2851562500 | 11201.5820312500 |
| 1         | `0001`        | CH1     |  6548.6171875000 | 11373.9140625000 |
| 2         | `0010`        | CH2     |  6720.9492187500 | 11546.2460937500 |
| 3         | `0011`        | CH3     |  7065.6132812500 | 11890.9101562500 |
| 4         | `0100`        | CH4     |  7237.9453125000 | 12063.2421875000 |
| 5         | `0101`        | CH5     |  7410.2773437500 | 12235.5742187500 |
| 6         | `0110`        | CH6     |  7754.9414062500 | 12580.2382812500 |
| 7         | `0111`        | CH7     |  7927.2734375000 | 12752.5703125000 |
| 8         | `1000`        | CH8     |  8099.6054687500 | 12924.9023437500 |
| 9         | `1001`        | CH9     |  8444.2695312500 | 13269.5664062500 |
| A         | `1010`        | CH10    |  8616.6015625000 | 13441.8984375000 |
| b         | `1011`        | CH11    |  8788.9335937500 | 13614.2304687500 |
| -         | `11xx`        | -       |  -               | -                |


## COPYRIGHT

- Copyright (c) Michael Roland <michael.roland@fh-hagenberg.at>

All rights reserved.
